/*!
 * UltraDate.js v1.0.0 (http://hrdaya.github.io/UltraDate.js/)
 *
 * Copyright 2015 yu-ki higa (https://github.com/hrdaya)
 * Licensed under MIT (https://github.com/hrdaya/UltraDate.js/blob/master/LICENSE)
 */
function UltraDate(a,b,c,d,e,f,g){"use strict";var h=function(a){return a=parseInt(a,10),isNaN(a)?0:a};if(this instanceof UltraDate)switch(this.date={_value:void 0,get value(){return this._value},set value(a){if(isNaN(a.getTime()))throw new Error("not Date Object");this._value=a}},arguments.length){case 0:this.date.value=new Date;break;case 1:this.date.value=new Date(a);break;default:this.date.value=new Date(h(a),h(b),h(c),h(d),h(e),h(f),h(g))}else switch(arguments.length){case 0:return new UltraDate;case 1:return new UltraDate(a);default:return new UltraDate(a,b,c,d,e,f,g)}}!function(){"use strict";var a=function(a){return a=parseInt(a,10),isNaN(a)?0:a},b=function(a,b){return b=parseInt(b,10),isNaN(b)&&(b=2),2>b?a:(new Array(b).join("0")+a).slice(-1*b)},c=function(a){if(a=void 0===a?new UltraDate:new UltraDate(a),isNaN(a.getTime()))throw new Error("not UltraDate Object");return a},d=function(a,b,c){a=parseInt(a,10),b=parseInt(b,10),(isNaN(a)||0>a&&a>6)&&(a=1),(isNaN(b)||0>b&&b>6)&&(b=4);var d=new UltraDate(c.getFullYear(),0,1).clearTime(),e=new UltraDate(c).clearTime(),f=0,g=e.getDay();0===a?g++:a>0&&7>a&&(g-=a-1,1>g&&(g+=7)),g=7-g,b=7-b;var h=function(a,b,c,d){return(a-b)/864e5+1+c+d},i=h(e,d,g,b);return 7>i&&0!==b&&(d.addYear(-1),i=h(e,d,g,b)),0===b?f=Math.ceil(i/7):b>0&&7>=b&&(f=Math.floor(i/7)),f};UltraDate.now=function(){return Date.now?Date.now():(new Date).getTime()},UltraDate.parse=function(a){return Date.parse(a)},UltraDate.UTC=function(){var a=[].slice.apply(arguments);return Date.UTC.apply(null,a)},UltraDate.getDefaultFormat=function(){return this.prototype.defaultFormat.value},UltraDate.setFormatOption=function(a,b){if("string"!=typeof a||"def"===a||""===a||"[object Object]"!==Object.prototype.toString.call(b))throw new Error("引数のデータ型がおかしいです");a in this.prototype._formats||(this.prototype._formats[a]={}),"era"in b&&!("eraStrict"in b)&&(b.eraStrict=b.era);for(var c in this.prototype._formats.def)this.prototype._formats[a][c]=c in b?b[c]:this.prototype._formats.def[c];return this},UltraDate.setHolidayOption=function(a,b){if("string"!=typeof a||"def"===a||""===a||"[object Object]"!==Object.prototype.toString.call(b))throw new Error("引数のデータ型がおかしいです");if(!("get"in b))throw new Error("必須関数の「get()」が存在しません");if("[object Function]"!==Object.prototype.toString.call(b.get))throw new Error("「get」が関数ではありません");return this.prototype._holidays[a]=b,this},UltraDate.setDefaultLocale=function(a){if("string"!=typeof a||""===a)throw new Error("引数のデータ型がおかしいです");return this.prototype.defaultLocale=a,this},UltraDate.prototype={instanceName:"UltraDate",defaultLocale:"def",defaultFormat:{_value:"yyyy/MM/dd",get value(){return this._value}},constructor:UltraDate,copy:function(){return new UltraDate(this.date.value)},format:function(a,c,d,e){if("string"!=typeof a)return a;"string"!=typeof e&&(e=this.defaultLocale),e in this._formats||(this._formats[e]=this._formats.def);var f=this._formats[e],g=f.era(this);d===!0&&(g=f.eraStrict(this));var h=0;this.getHours()>=12&&(h=1);var i={yyyy:this.getFullYear(),yy:b(this.getFullYear()),eeee:b(g.year,4),eee:b(g.year,3),ee:b(g.year),e:g.year,ggg:g.longName,gg:g.shortName,g:g.alphaName,MMMM:f.longMonth[this.getMonth()],MMM:f.shortMonth[this.getMonth()],MM:b(this.getRealMonth()),M:this.getRealMonth(),dd:b(this.getDate()),d:this.getDate(),HH:b(this.getHours()),H:this.getHours(),hh:b(this.getHours()-12*h),h:this.getHours()-12*h,mm:b(this.getMinutes()),m:this.getMinutes(),ss:b(this.getSeconds()),s:this.getSeconds(),fff:b(this.getMilliseconds(),3),f:this.getMilliseconds(),TT:f.largeNoon[h],tt:f.smallNoon[h],www:this.getDayCountsInMonth(),ww:b(this.getISOWeek()),w:this.getISOWeek(),WW:b(this.getUSWeek()),W:this.getUSWeek(),DD:f.longDay[this.getDay()],D:f.shortDay[this.getDay()]},j=[];for(var k in i)j.push(k);return c===!0?(j="(_"+j.join("_|_")+"_)",a.replace(new RegExp(j,"g"),function(a){return i[a.replace(/_/g,"")]})):(j="("+j.join("|")+")",a.replace(new RegExp(j,"g"),function(a){return i[a]}))},addYear:function(b){return this.setFullYear(this.getFullYear()+a(b)),this},addMonth:function(b){return this.setMonth(this.getMonth()+a(b)),this},addDate:function(b){return this.setDate(this.getDate()+a(b)),this},addHours:function(b){return this.setHours(this.getHours()+a(b)),this},addMinutes:function(b){return this.setMinutes(this.getMinutes()+a(b)),this},addSeconds:function(b){return this.setSeconds(this.getSeconds()+a(b)),this},addMilliseconds:function(b){return this.setMilliseconds(this.getMilliseconds()+a(b)),this},setRealMonth:function(b){return this.setMonth(a(b)-1),this},setDayCountsInMonth:function(a,b){if(a=parseInt(a,10),b=parseInt(b,10),isNaN(a)||isNaN(b)||0>b&&b>6)throw new Error("引数のデータがおかしいです");this.setDate(1);var c=b-this.getDay()+1;return 1>c&&(c+=7),c+=7*(a-1),this.setDate(c),this},setFirstDate:function(b){return this.clearTime().setFullYear(this.getFullYear(),this.getMonth()+a(b),1),this},setEndDate:function(b){return this.setFirstDate().addMonth(a(b)+1).setDate(0),this},setBeforeWeekday:function(b,c){switch(a(b)){case 0:for(;6===this.getDay()||0===this.getDay()||this.isHoliday(c);)this.addDate(-1);break;case 1:for(;6===this.getDay()||0===this.getDay();)this.addDate(-1);break;case 2:for(;0===this.getDay()||this.isHoliday(c);)this.addDate(-1);break;case 3:for(;0===this.getDay();)this.addDate(-1);break;case 4:for(;this.isHoliday(c);)this.addDate(-1)}return this},setAfterWeekday:function(b,c){switch(a(b)){case 0:for(;6===this.getDay()||0===this.getDay()||this.isHoliday(c);)this.addDate(1);break;case 1:for(;6===this.getDay()||0===this.getDay();)this.addDate(1);break;case 2:for(;0===this.getDay()||this.isHoliday(c);)this.addDate(1);break;case 3:for(;0===this.getDay();)this.addDate(1);break;case 4:for(;this.isHoliday(c);)this.addDate(1)}return this},clearTime:function(){return this.setHours(0,0,0,0),this},getRealMonth:function(){return this.getMonth()+1},getDayCountsInMonth:function(){return Math.ceil(this.getDate()/7)},getISOWeek:function(){return d(1,4,this)},getUSWeek:function(){return d(0,0,this)},getEndDate:function(a){return this.copy().setEndDate(a).getDate()},getHolidays:function(b,c){return b=b?a(b):this.getFullYear(),c=c?c:this.defaultLocale,c in this._holidays||(this._holidays[c]=this._holidays.def),this._holidays[c].get(b)},getHoliday:function(a){var b=this.getHolidays(this.getFullYear(),a),c=this.format(this.defaultFormat.value);return c in b?b[c]:""},diff:function(a){a=c(a);var b=a.getTime()-this.getTime(),d=b>=0;d||(b*=-1);var e=1e3,f=60*e,g=60*f,h=24*g,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;return i=b%e,m=b-i,m>0&&(j=m%f,n=m-j),n>0&&(k=n%g,o=n-k),o>0&&(l=o%h,p=o-l),{after:d,day:p/h,hour:l/g,minute:k/f,second:j/e,ms:i}},diffMonth:function(a){return a=c(a),12*a.getFullYear()+a.getMonth()-(12*this.getFullYear()+this.getMonth())},diffDate:function(a){a=c(a);var b=a.clearTime().getTime()-this.copy().clearTime().getTime();return b/864e5},isLeapYear:function(b){return b=b?a(b):this.getFullYear(),b%4===0&&b%100!==0||b%400===0},isDayCountsInMonth:function(b,c){return this.getDayCountsInMonth()===a(b)&&this.getDay()===a(c)},isISOWeekDay:function(b,c){return this.getISOWeek()===a(b)&&this.getDay()===a(c)},isUSWeekDay:function(b,c){return this.getUSWeek()===a(b)&&this.getDay()===a(c)},isISOWeek:function(b){return this.getISOWeek()===a(b)},isUSWeek:function(b){return this.getUSWeek()===a(b)},isSameDate:function(a){return this.copy().clearTime().getTime()===c(a).clearTime().getTime()},isBeforeDate:function(a){return this.copy().clearTime()<c(a).clearTime()},isAfterDate:function(a){return this.copy().clearTime()>c(a).clearTime()},isBetween:function(a,b,d){return a=c(a),b=c(b),d===!0&&(a.clearTime(),b.clearTime().addDate(1).addMilliseconds(-1)),this>=a&&b>=this},isToday:function(){return this.isSameDate(new UltraDate)},isTomorrow:function(){return this.isSameDate((new UltraDate).addDate(1))},isYesterday:function(){return this.isSameDate((new UltraDate).addDate(-1))},isNDate:function(b,d){return b=c(b),this.isSameDate(b.addDate(-1*a(d)))},isHoliday:function(a){return""!==this.getHoliday(a)},_holidays:{def:{get:function(){return{}}}},_formats:{def:{longDay:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDay:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longMonth:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonth:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],smallNoon:["am","pm"],largeNoon:["AM","PM"],era:function(a){return{longName:"A.D.",shortName:"AD",alphaNamet:"A",year:a.getFullYear()}},eraStrict:function(a){return this.era(a)}}}},Object.defineProperty(UltraDate.prototype,"instanceName",{writable:!1});var e=Object.getOwnPropertyNames(Date.prototype);for(var f in e)!function(a){"constructor"!==a&&"instanceName"!==a&&(UltraDate.prototype[a]=function(){return Date.prototype[a].apply(this.date.value,Array.prototype.slice.call(arguments))})}(e[f])}();